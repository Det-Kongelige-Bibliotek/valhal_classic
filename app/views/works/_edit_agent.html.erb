<div class="control-group">
  <%= f.label :agent, 'This work...', :class=>'control-label' %>
  <div class="controls">
    <select id="agent_relationship" name="agent_relationship" class="control-group">
      <% METADATA_RELATIONS_CONFIG['work'].split(' ').each do |relation|  %>
          <option id="<%= relation %>"><%= relation %></option>
      <% end %>
    </select>
  </div>
  <div class="controls">
    <%= collection_select(:agent,
                          :id,
                          AuthorityMetadataUnit.all,
                          :id,
                          :value,
                          options = { :include_blank => false },
                          { :multiple => false, :class=>'input-block-level' }) %>
  </div><br/>
  <div class="controls">
    <%= button_tag(type: 'button', onclick: 'addAgent($("#agent_relationship option:selected").text(),
                                                    $("#agent_id option:selected").text(), $("#agent_id option:selected").val())', class: 'btn') do
      content_tag(:label, 'Add Agent')
    end
    %>
  </div>
  <%= f.hidden_field :agents %>
  <br><br>
  <div id="work_agents" class="control-group">
    <table border="1" id="agent_relations" class="table">
      <thead>
      <tr>
        <th>Relationship Type</th>
        <th>Agent Name</th>
      </tr>
      </thead>
      <tbody id="agent_relations_tbody">
          <% if @work.get_relations.empty? %>
              <tr><td>None</td><td>None</td></tr>
          <% end %>
          <% @work.get_relations.each do |relation| %>
              <tr>
                <td><%=relation[0] %></td>
                <td>
                  <% unless relation[1].empty? %>
                      <% for i in 0...relation[1].length %>
                          <%= relation[1][i].value %>
                      <% end %>
                  <% end %>
                </td>
              </tr>
          <% end %>
      </tbody>
    </table>
  </div><br>
</div>
